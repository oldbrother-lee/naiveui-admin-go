---
description: 
globs: 
alwaysApply: true
---
# 数据库和API规范

## 数据库设计规范
### 命名规则
- 表名使用小写字母，单词间用下划线分隔
- 主键统一使用 `id`
- 创建和更新时间字段分别使用 `created_at` 和 `updated_at`
- 外键命名格式：`表名_id`

### 字段规范
- 必须指定字段的字符集和排序规则
- 所有表必须包含创建和更新时间
- 金额字段使用 DECIMAL 类型
- 状态字段优先使用 ENUM 类型

## API设计规范
### 接口命名
- 使用 RESTful 风格
- URL 使用小写字母
- 资源名称使用复数形式
- 版本号放在 URL 中，例如 `/v1/users`

### 请求响应
- 请求体使用 JSON 格式
- 响应必须包含状态码和消息
- 分页接口必须返回总数和分页信息
- 时间格式统一使用 ISO 8601

### 错误处理
- 使用标准的 HTTP 状态码
- 错误响应必须包含错误代码和描述
- 系统错误和业务错误分开处理
- 提供详细的错误日志

### 安全规范
- 所有接口必须进行认证
- 敏感数据传输必须使用 HTTPS
- 实现请求频率限制
- 接口调用需要记录审计日志
