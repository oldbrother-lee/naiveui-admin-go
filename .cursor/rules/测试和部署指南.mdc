---
description: 
globs: 
alwaysApply: false
---
# 测试和部署指南

## 测试规范
### 单元测试
- 所有包必须有对应的 `_test.go` 文件
- 测试覆盖率要求不低于 80%
- 使用 `testing` 包进行测试
- 模拟外部依赖使用 mock 对象

### 集成测试
- 使用 Docker 容器进行集成测试
- 测试数据库使用独立实例
- 测试用例必须能够并行运行
- 每个 API 端点都需要集成测试

## 部署流程
### 环境配置
- 开发环境：dev
- 测试环境：test
- 预发布环境：staging
- 生产环境：prod

### CI/CD
- 使用 GitHub Actions 进行持续集成
- 提交到主分支自动触发测试
- 版本发布使用语义化版本号
- 部署前必须通过所有测试

### 监控告警
- 使用 Prometheus 收集指标
- Grafana 展示监控面板
- 配置关键指标告警
- 保存详细的应用日志

### 发布策略
- 采用蓝绿部署
- 支持快速回滚
- 重要更新进行灰度发布
- 建立发布审批流程
